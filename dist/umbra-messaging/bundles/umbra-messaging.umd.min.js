!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/cdk/overlay"),require("@angular/cdk/portal"),require("lib/lib/shared/classes/common-functions"),require("rxjs"),require("@angular/common"),require("@angular/flex-layout/flex"),require("@angular/material"),require("@angular/flex-layout"),require("@angular/flex-layout/extended")):"function"==typeof define&&define.amd?define("umbra-messaging",["exports","@angular/core","@angular/cdk/overlay","@angular/cdk/portal","lib/lib/shared/classes/common-functions","rxjs","@angular/common","@angular/flex-layout/flex","@angular/material","@angular/flex-layout","@angular/flex-layout/extended"],e):e((t=t||self)["umbra-messaging"]={},t.ng.core,t.ng.cdk.overlay,t.ng.cdk.portal,t.commonFunctions,t.rxjs,t.ng.common,t.ng["flex-layout"].flex,t.ng.material,t.ng["flex-layout"],t.ng["flex-layout"].extended)}(this,function(t,e,n,o,a,r,i,s,l,c,u){"use strict";function g(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,a,r=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(t){a={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i}var p=function(){function t(t){this.overlay=t,this.overlayRef=t}return t.prototype.close=function(){this.overlay.dispose()},t.prototype.isVisible=function(){return this.overlay&&this.overlay.overlayElement},t.prototype.getPosition=function(){return this.overlay.overlayElement.getBoundingClientRect()},t}(),m=function(){},f=function(){},d={verticalPosition:"top",horizontalPosition:"right",closable:!0,position:{},toastData:{type:"success"}},y=["toast"],h=["dataIcon"],v=["closeIcon"],x=["text"],b=[4,"ngIf","ngIfElse"],C=["templateRef",""],M=[3,"value",4,"ngIf"],I=["fxLayout","row","fxLayoutAlign","center center"],T=["toast",""],O=["fxLayout","column","fxLayoutAlign","center center",1,"toast-data-icon"],P=["dataIcon",""],D=["fxLayout","column","fxLayoutAlign","center center",1,"toast-text"],w=["text",""],_=["fxLayout","column","fxLayoutAlign","center center",1,"toast-close-icon"],E=["closeIcon",""],k=[3,"click",4,"ngIf"],j=[3,"value"];function S(t,n){if(1&t&&e.ɵɵelement(0,"mat-progress-bar",j),2&t){var o=e.ɵɵnextContext(2);e.ɵɵproperty("value",o.progressBarValue)}}var B=[3,"click"];function F(t,n){if(1&t){var o=e.ɵɵgetCurrentView();e.ɵɵelementStart(0,"mat-icon",B),e.ɵɵlistener("click",function(t){return e.ɵɵrestoreView(o),e.ɵɵnextContext(2).close()}),e.ɵɵtext(1,"close"),e.ɵɵelementEnd()}}function L(t,n){if(1&t&&(e.ɵɵelementContainerStart(0),e.ɵɵtemplate(1,S,1,1,"mat-progress-bar",M),e.ɵɵelementStart(2,"div",I,T),e.ɵɵelementStart(4,"div",O,P),e.ɵɵelementStart(6,"mat-icon"),e.ɵɵtext(7),e.ɵɵelementEnd(),e.ɵɵelementEnd(),e.ɵɵelementStart(8,"div",D,w),e.ɵɵtext(10),e.ɵɵelementEnd(),e.ɵɵelementStart(11,"div",_,E),e.ɵɵtemplate(13,F,2,0,"mat-icon",k),e.ɵɵelementEnd(),e.ɵɵelementEnd(),e.ɵɵelementContainerEnd()),2&t){var o=e.ɵɵnextContext();e.ɵɵselect(1),e.ɵɵproperty("ngIf",o.data.timeout),e.ɵɵselect(7),e.ɵɵtextInterpolate(o.iconType),e.ɵɵselect(10),e.ɵɵtextInterpolate1(" ",o.data.toastData.text," "),e.ɵɵselect(13),e.ɵɵproperty("ngIf",o.data.closable)}}var R=[4,"ngTemplateOutlet","ngTemplateOutletContext"];function q(t,n){1&t&&e.ɵɵelementContainer(0)}function N(t,n){if(1&t&&e.ɵɵtemplate(0,q,1,0,"ng-container",R),2&t){var o=e.ɵɵnextContext();e.ɵɵproperty("ngTemplateOutlet",o.data.toastData.template)("ngTemplateOutletContext",o.data.toastData.templateContext)}}var V=function(){function t(t,e,n,o,a){this.data=t,this.toastRef=e,this.renderer=n,this.umbraToastService=o,this.changeDetectorRef=a,this.toastConfig=t,this.iconType="success"===t.toastData.type?"done":t.toastData.type}return t.prototype.ngOnInit=function(){var t=this;if(a.isDefAndNotNull(this.data.timeout)){this.progressBarValue=100;var e=r.interval(1e3).subscribe(function(n){t.progressBarValue=100-100*n/(t.data.timeout/1e3),t.changeDetectorRef.markForCheck(),n>=t.data.timeout/1e3&&(t.close(),e.unsubscribe())})}},t.prototype.ngAfterViewInit=function(){this.renderer.addClass(this.toast.nativeElement,"toast"),this.renderer.addClass(this.toast.nativeElement,"toast-type-"+this.toastConfig.toastData.type),this.renderer.addClass(this.dataIcon.nativeElement,"toast-data-icon-"+this.toastConfig.toastData.type),this.renderer.addClass(this.closeIcon.nativeElement,"toast-close-icon-"+this.toastConfig.toastData.type)},t.prototype.ngOnDestroy=function(){},t.prototype.close=function(){this.umbraToastService.closeToast(this.toastRef)},t.ngFactoryDef=function(n){return new(n||t)(e.ɵɵdirectiveInject(f),e.ɵɵdirectiveInject(p),e.ɵɵdirectiveInject(e.Renderer2),e.ɵɵdirectiveInject(Q),e.ɵɵdirectiveInject(e.ChangeDetectorRef))},t.ngComponentDef=e.ɵɵdefineComponent({type:t,selectors:[["umbra-messaging-toast"]],viewQuery:function(t,n){var o;(1&t&&(e.ɵɵviewQuery(y,!0),e.ɵɵviewQuery(h,!0),e.ɵɵviewQuery(v,!0),e.ɵɵviewQuery(x,!0)),2&t)&&(e.ɵɵqueryRefresh(o=e.ɵɵloadQuery())&&(n.toast=o.first),e.ɵɵqueryRefresh(o=e.ɵɵloadQuery())&&(n.dataIcon=o.first),e.ɵɵqueryRefresh(o=e.ɵɵloadQuery())&&(n.closeIcon=o.first),e.ɵɵqueryRefresh(o=e.ɵɵloadQuery())&&(n.text=o.first))},consts:3,vars:2,template:function(t,n){if(1&t&&(e.ɵɵtemplate(0,L,14,4,"ng-container",b),e.ɵɵtemplate(1,N,1,2,"ng-template",null,C,e.ɵɵtemplateRefExtractor)),2&t){var o=e.ɵɵreference(2);e.ɵɵproperty("ngIf",n.data.toastData.text)("ngIfElse",o)}},directives:[i.NgIf,s.DefaultLayoutDirective,s.DefaultLayoutAlignDirective,l.MatIcon,l.MatProgressBar,i.NgTemplateOutlet],styles:[".toast[_ngcontent-%COMP%]{background:#fff;border-width:1px;border-style:solid;border-color:#ddd #d6d6d6 #cfcfcf;box-shadow:0 2px 4px rgba(0,0,0,.11);min-height:1em;height:3em}.toast-close-icon[_ngcontent-%COMP%], .toast-data-icon[_ngcontent-%COMP%]{padding:0 .5em}.toast-data-icon[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{border-radius:15px;padding:1px;border:1px solid #000}.toast-data-icon-success[_ngcontent-%COMP%] > .mat-icon[_ngcontent-%COMP%]{background-color:#20b2aa}.toast-data-icon-warning[_ngcontent-%COMP%] > .mat-icon[_ngcontent-%COMP%]{background-color:#dd8900}.toast-data-icon-info[_ngcontent-%COMP%] > .mat-icon[_ngcontent-%COMP%]{background-color:#749aa8}.toast-close-icon[_ngcontent-%COMP%]{cursor:pointer}.toast-close-icon-success[_ngcontent-%COMP%]{background-color:#00b173;height:100%;border-left:3px solid #2e8b57}.toast-close-icon-warning[_ngcontent-%COMP%]{background-color:#dd8900;height:100%;border-left:3px solid #f09c00}.toast-close-icon-info[_ngcontent-%COMP%]{background-color:#749aa8;height:100%;border-left:3px solid #557a88}.toast-type-success[_ngcontent-%COMP%]{background-color:green;color:#fff}.toast-text[_ngcontent-%COMP%]{padding:0 .5em}.toast-type-warning[_ngcontent-%COMP%]{background-color:orange;color:#fff}.toast-type-info[_ngcontent-%COMP%]{background-color:#add8e6;color:#fff}"],changeDetection:0}),t}();function A(t){return null!=t}e.Component,e.ChangeDetectionStrategy.OnPush,e.ViewChild,e.ViewChild,e.ViewChild,e.ViewChild;var Q=function(){function t(t,e){this.overlay=t,this.parentInjector=e,this.openTopToasts=[],this.openBottomToasts=[]}return t.prototype.showToast=function(t){null==t&&(t=d);var e=this.getOverlayPosition(t),n=this.overlay.create({positionStrategy:e}),a=new p(n);"top"===t.verticalPosition&&this.openTopToasts.push(a),"bottom"===t.verticalPosition&&this.openBottomToasts.push(a);var r=this.getInjector(t,a,this.parentInjector),i=new o.ComponentPortal(V,null,r);return n.attach(i),a},t.prototype.closeToast=function(t){this.openTopToasts=this.openTopToasts.filter(function(e){if(e!==t)return e}),this.openBottomToasts=this.openBottomToasts.filter(function(e){if(e!==t)return e}),t.close()},t.prototype.closeAllToasts=function(){(function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t})(this.openTopToasts,this.openBottomToasts).forEach(function(t){t.close()}),this.openBottomToasts=[],this.openTopToasts=[]},t.prototype.getInjector=function(t,e,n){var a=new WeakMap;return a.set(f,t),a.set(p,e),new o.PortalInjector(n,a)},t.prototype.getOverlayPosition=function(t){var e=this.overlay.position().global();if("center"===t.verticalPosition)e.centerVertically();else{if("top"===t.verticalPosition){var n=0,o=void 0;this.openTopToasts.length>0&&(o=this.openTopToasts[this.openTopToasts.length-1]),A(o)&&(n=o.getPosition().height);var a=void 0;a=t.position.top?this.openTopToasts.length*n+t.position.top:this.openTopToasts.length*n,e.top(a+"px")}if("bottom"===t.verticalPosition){var r=0,i=void 0;this.openBottomToasts.length>0&&(i=this.openBottomToasts[this.openBottomToasts.length-1]),A(i)&&(r=i.getPosition().height);a=void 0;a=t.position.bottom?this.openBottomToasts.length*r+t.position.bottom:this.openBottomToasts.length*r,e.bottom(a+"px")}}return"center"===t.horizontalPosition?e.centerHorizontally():("right"===t.horizontalPosition&&(t.position.right?e.right(t.position.right+"px"):e.right("25px")),"left"===t.horizontalPosition&&(t.position.left?e.left(t.position.left+"px"):e.left("25px"))),e},t.ngInjectableDef=e.ɵɵdefineInjectable({token:t,factory:function(o){return new(o||t)(e.ɵɵinject(n.Overlay),e.ɵɵinject(e.Injector))},providedIn:null}),t}();e.Injectable;var U=function(){function t(){}return t.ngModuleDef=e.ɵɵdefineNgModule({type:t}),t.ngInjectorDef=e.ɵɵdefineInjector({factory:function(e){return new(e||t)},providers:[Q],imports:[[i.CommonModule,n.OverlayModule,l.MatIconModule,c.FlexLayoutModule,l.MatProgressBarModule]]}),t}();i.CommonModule,n.OverlayModule,l.MatIconModule,c.FlexLayoutModule,l.MatProgressBarModule,e.NgModule,i.CommonModule,n.OverlayModule,l.MatIconModule,c.FlexLayoutModule,l.MatProgressBarModule;var z=[1,"umbra-messages-inline"],$=[3,"ngIf","ngIfElse"],G=["groupMessageContainer",""],H=["inlineMessage",""],W=["ngFor","",3,"ngForOf"],J=[4,"ngTemplateOutlet","ngTemplateOutletContext"];function K(t,n){1&t&&e.ɵɵelementContainer(0)}var X=function(t){return{message:t}};function Y(t,n){if(1&t&&e.ɵɵtemplate(0,K,1,0,"ng-container",J),2&t){var o=n.$implicit;e.ɵɵnextContext(2);var a=e.ɵɵreference(5);e.ɵɵproperty("ngTemplateOutlet",a)("ngTemplateOutletContext",e.ɵɵpureFunction1(2,X,o))}}function Z(t,n){if(1&t&&e.ɵɵtemplate(0,Y,1,4,"ng-template",W),2&t){var o=e.ɵɵnextContext();e.ɵɵproperty("ngForOf",o.umbraMessages)}}var tt=[1,"umbra-inline-group-message-container"];function et(t,n){1&t&&e.ɵɵelementContainer(0)}function nt(t,n){if(1&t&&e.ɵɵtemplate(0,et,1,0,"ng-container",J),2&t){var o=n.$implicit;e.ɵɵnextContext(2);var a=e.ɵɵreference(5);e.ɵɵproperty("ngTemplateOutlet",a)("ngTemplateOutletContext",e.ɵɵpureFunction1(2,X,o))}}function ot(t,n){if(1&t&&(e.ɵɵelementStart(0,"div",tt),e.ɵɵtemplate(1,nt,1,4,"ng-template",W),e.ɵɵelementEnd()),2&t){var o=e.ɵɵnextContext();e.ɵɵselect(1),e.ɵɵproperty("ngForOf",o.umbraMessages)}}var at=[3,"ngClass"],rt=["class","umbra-inline-group-message-icon",4,"ngIf"],it=["class","umbra-inline-group-message-title",4,"ngIf"],st=["class","umbra-inline-group-message-summary",4,"ngIf"],lt=[1,"umbra-inline-group-message-icon"];function ct(t,n){if(1&t&&(e.ɵɵelementStart(0,"span",lt),e.ɵɵelementStart(1,"mat-icon"),e.ɵɵtext(2),e.ɵɵelementEnd(),e.ɵɵelementEnd()),2&t){var o=e.ɵɵnextContext().message;e.ɵɵselect(2),e.ɵɵtextInterpolate(o.icon)}}var ut=[1,"umbra-inline-group-message-title"];function gt(t,n){if(1&t&&(e.ɵɵelementStart(0,"span",ut),e.ɵɵtext(1),e.ɵɵelementEnd()),2&t){var o=e.ɵɵnextContext().message;e.ɵɵselect(1),e.ɵɵtextInterpolate1("",o.title,":")}}var pt=[1,"umbra-inline-group-message-summary"];function mt(t,n){if(1&t&&(e.ɵɵelementStart(0,"span",pt),e.ɵɵtext(1),e.ɵɵelementEnd()),2&t){var o=e.ɵɵnextContext().message;e.ɵɵselect(1),e.ɵɵtextInterpolate1(" ",o.summary,"")}}var ft=function(t,e,n,o,a,r){return{"umbra-inline-group-message":t,"umbra-inline-message":e,"umbra-messaging-error":n,"umbra-messaging-info":o,"umbra-messaging-warning":a,"umbra-messaging-success":r}};function dt(t,n){if(1&t&&(e.ɵɵelementStart(0,"div",at),e.ɵɵtemplate(1,ct,3,1,"span",rt),e.ɵɵtemplate(2,gt,2,1,"span",it),e.ɵɵtemplate(3,mt,2,1,"span",st),e.ɵɵelementEnd()),2&t){var o=n.message,a=e.ɵɵnextContext();e.ɵɵproperty("ngClass",e.ɵɵpureFunction6(4,ft,a.groupMessages,!a.groupMessages,"error"===o.type,"info"===o.type,"warning"===o.type,"success"===o.type)),e.ɵɵselect(1),e.ɵɵproperty("ngIf",o.icon),e.ɵɵselect(2),e.ɵɵproperty("ngIf",o.title),e.ɵɵselect(3),e.ɵɵproperty("ngIf",o.summary)}}var yt=function(){function t(){this.umbraMessages=[],this.groupMessages=!1,this.shouldTimeout=!1,this.setTimeout=2500}return t.prototype.ngOnInit=function(){this.shouldTimeout},t.ngFactoryDef=function(e){return new(e||t)},t.ngComponentDef=e.ɵɵdefineComponent({type:t,selectors:[["umbra-messaging-inline"]],inputs:{umbraMessages:"umbraMessages",groupMessages:"groupMessages",shouldTimeout:"shouldTimeout",setTimeout:"setTimeout"},consts:6,vars:2,template:function(t,n){if(1&t&&(e.ɵɵelementStart(0,"div",z),e.ɵɵtemplate(1,Z,1,1,"ng-template",$),e.ɵɵtemplate(2,ot,2,1,"ng-template",null,G,e.ɵɵtemplateRefExtractor),e.ɵɵelementEnd(),e.ɵɵtemplate(4,dt,4,11,"ng-template",null,H,e.ɵɵtemplateRefExtractor)),2&t){var o=e.ɵɵreference(3);e.ɵɵselect(1),e.ɵɵproperty("ngIf",!n.groupMessages)("ngIfElse",o)}},directives:[i.NgIf,i.NgForOf,i.NgTemplateOutlet,u.DefaultClassDirective,i.NgClass,l.MatIcon],styles:[".umbra-inline-message[_ngcontent-%COMP%]{border-radius:5px;padding:10px;margin-top:2px;border:1px solid #000}.umbra-inline-group-message-container[_ngcontent-%COMP%]{border-radius:5px;border:1px solid #000}.umbra-inline-group-message[_ngcontent-%COMP%]{padding:10px}.umbra-inline-group-message-title[_ngcontent-%COMP%]{font-weight:700}.umbra-messaging-error[_ngcontent-%COMP%]{background-color:red}.umbra-messaging-warning[_ngcontent-%COMP%]{background-color:orange}.umbra-messaging-success[_ngcontent-%COMP%]{background-color:green}.umbra-messaging-info[_ngcontent-%COMP%]{background-color:#add8e6}"],changeDetection:0}),t}();e.Component,e.ChangeDetectionStrategy.OnPush,e.Input,e.Input,e.Input,e.Input;var ht=function(){function t(){}return t.ngModuleDef=e.ɵɵdefineNgModule({type:t}),t.ngInjectorDef=e.ɵɵdefineInjector({factory:function(e){return new(e||t)},imports:[[l.MatIconModule,c.FlexLayoutModule,i.CommonModule]]}),t}();l.MatIconModule,c.FlexLayoutModule,i.CommonModule,e.NgModule,l.MatIconModule,c.FlexLayoutModule,i.CommonModule,t.DEFAULT_MARGIN=25,t.ToastConfig=f,t.ToastData=m,t.UmbraInlineComponent=yt,t.UmbraInlineModule=ht,t.UmbraToastComponent=V,t.UmbraToastModule=U,t.UmbraToastService=Q,t.defaultToastConfig=d,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=umbra-messaging.umd.min.js.map