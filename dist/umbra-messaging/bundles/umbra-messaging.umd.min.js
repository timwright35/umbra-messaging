!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/cdk/overlay"),require("@angular/cdk/portal"),require("lib/lib/shared/classes/common-functions"),require("rxjs"),require("@angular/common"),require("@angular/flex-layout/flex"),require("@angular/material"),require("@angular/flex-layout")):"function"==typeof define&&define.amd?define("umbra-messaging",["exports","@angular/core","@angular/cdk/overlay","@angular/cdk/portal","lib/lib/shared/classes/common-functions","rxjs","@angular/common","@angular/flex-layout/flex","@angular/material","@angular/flex-layout"],e):e((t=t||self)["umbra-messaging"]={},t.ng.core,t.ng.cdk.overlay,t.ng.cdk.portal,t.commonFunctions,t.rxjs,t.ng.common,t.ng["flex-layout"].flex,t.ng.material,t.ng["flex-layout"])}(this,function(t,e,o,n,a,r,i,s,l,c){"use strict";function u(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,a,r=o.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(t){a={error:t}}finally{try{n&&!n.done&&(o=r.return)&&o.call(r)}finally{if(a)throw a.error}}return i}var p=function(){function t(t){this.overlay=t,this.overlayRef=t}return t.prototype.close=function(){this.overlay.dispose()},t.prototype.isVisible=function(){return this.overlay&&this.overlay.overlayElement},t.prototype.getPosition=function(){return this.overlay.overlayElement.getBoundingClientRect()},t}(),f=function(){},g=function(){},d={verticalPosition:"top",horizontalPosition:"right",closable:!0,position:{},toastData:{type:"success"}},m=["toast"],h=["dataIcon"],y=["closeIcon"],v=["text"],x=[4,"ngIf","ngIfElse"],M=["templateRef",""],b=[3,"value",4,"ngIf"],C=["fxLayout","row","fxLayoutAlign","center center"],I=["toast",""],T=["fxLayout","column","fxLayoutAlign","center center",1,"toast-data-icon"],P=["dataIcon",""],O=["fxLayout","column","fxLayoutAlign","center center",1,"toast-text"],D=["text",""],w=["fxLayout","column","fxLayoutAlign","center center",1,"toast-close-icon"],j=["closeIcon",""],E=[3,"click",4,"ngIf"],k=[3,"value"];function _(t,o){if(1&t&&e.ɵɵelement(0,"mat-progress-bar",k),2&t){var n=e.ɵɵnextContext(2);e.ɵɵproperty("value",n.progressBarValue)}}var B=[3,"click"];function S(t,o){if(1&t){var n=e.ɵɵgetCurrentView();e.ɵɵelementStart(0,"mat-icon",B),e.ɵɵlistener("click",function(t){return e.ɵɵrestoreView(n),e.ɵɵnextContext(2).close()}),e.ɵɵtext(1,"close"),e.ɵɵelementEnd()}}function L(t,o){if(1&t&&(e.ɵɵelementContainerStart(0),e.ɵɵtemplate(1,_,1,1,"mat-progress-bar",b),e.ɵɵelementStart(2,"div",C,I),e.ɵɵelementStart(4,"div",T,P),e.ɵɵelementStart(6,"mat-icon"),e.ɵɵtext(7),e.ɵɵelementEnd(),e.ɵɵelementEnd(),e.ɵɵelementStart(8,"div",O,D),e.ɵɵtext(10),e.ɵɵelementEnd(),e.ɵɵelementStart(11,"div",w,j),e.ɵɵtemplate(13,S,2,0,"mat-icon",E),e.ɵɵelementEnd(),e.ɵɵelementEnd(),e.ɵɵelementContainerEnd()),2&t){var n=e.ɵɵnextContext();e.ɵɵselect(1),e.ɵɵproperty("ngIf",n.data.timeout),e.ɵɵselect(7),e.ɵɵtextInterpolate(n.iconType),e.ɵɵselect(10),e.ɵɵtextInterpolate1(" ",n.data.toastData.text," "),e.ɵɵselect(13),e.ɵɵproperty("ngIf",n.data.closable)}}var F=[4,"ngTemplateOutlet","ngTemplateOutletContext"];function R(t,o){1&t&&e.ɵɵelementContainer(0)}function q(t,o){if(1&t&&e.ɵɵtemplate(0,R,1,0,"ng-container",F),2&t){var n=e.ɵɵnextContext();e.ɵɵproperty("ngTemplateOutlet",n.data.toastData.template)("ngTemplateOutletContext",n.data.toastData.templateContext)}}var V=function(){function t(t,e,o,n,a){this.data=t,this.toastRef=e,this.renderer=o,this.umbraToastService=n,this.changeDetectorRef=a,this.toastConfig=t,this.iconType="success"===t.toastData.type?"done":t.toastData.type}return t.prototype.ngOnInit=function(){var t=this;if(a.isDefAndNotNull(this.data.timeout)){this.progressBarValue=100;var e=r.interval(1e3).subscribe(function(o){t.progressBarValue=100-100*o/(t.data.timeout/1e3),t.changeDetectorRef.markForCheck(),o>=t.data.timeout/1e3&&(t.close(),e.unsubscribe())})}},t.prototype.ngAfterViewInit=function(){this.renderer.addClass(this.toast.nativeElement,"toast"),this.renderer.addClass(this.toast.nativeElement,"toast-type-"+this.toastConfig.toastData.type),this.renderer.addClass(this.dataIcon.nativeElement,"toast-data-icon-"+this.toastConfig.toastData.type),this.renderer.addClass(this.closeIcon.nativeElement,"toast-close-icon-"+this.toastConfig.toastData.type)},t.prototype.ngOnDestroy=function(){},t.prototype.close=function(){this.umbraToastService.closeToast(this.toastRef)},t.ngFactoryDef=function(o){return new(o||t)(e.ɵɵdirectiveInject(g),e.ɵɵdirectiveInject(p),e.ɵɵdirectiveInject(e.Renderer2),e.ɵɵdirectiveInject(A),e.ɵɵdirectiveInject(e.ChangeDetectorRef))},t.ngComponentDef=e.ɵɵdefineComponent({type:t,selectors:[["umbra-messaging-toast"]],viewQuery:function(t,o){var n;(1&t&&(e.ɵɵviewQuery(m,!0),e.ɵɵviewQuery(h,!0),e.ɵɵviewQuery(y,!0),e.ɵɵviewQuery(v,!0)),2&t)&&(e.ɵɵqueryRefresh(n=e.ɵɵloadQuery())&&(o.toast=n.first),e.ɵɵqueryRefresh(n=e.ɵɵloadQuery())&&(o.dataIcon=n.first),e.ɵɵqueryRefresh(n=e.ɵɵloadQuery())&&(o.closeIcon=n.first),e.ɵɵqueryRefresh(n=e.ɵɵloadQuery())&&(o.text=n.first))},consts:3,vars:2,template:function(t,o){if(1&t&&(e.ɵɵtemplate(0,L,14,4,"ng-container",x),e.ɵɵtemplate(1,q,1,2,"ng-template",null,M,e.ɵɵtemplateRefExtractor)),2&t){var n=e.ɵɵreference(2);e.ɵɵproperty("ngIf",o.data.toastData.text)("ngIfElse",n)}},directives:[i.NgIf,s.DefaultLayoutDirective,s.DefaultLayoutAlignDirective,l.MatIcon,l.MatProgressBar,i.NgTemplateOutlet],styles:[".toast[_ngcontent-%COMP%]{background:#fff;border-width:1px;border-style:solid;border-color:#ddd #d6d6d6 #cfcfcf;box-shadow:0 2px 4px rgba(0,0,0,.11);min-height:1em;height:3em}.toast-close-icon[_ngcontent-%COMP%], .toast-data-icon[_ngcontent-%COMP%]{padding:0 .5em}.toast-data-icon[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{border-radius:15px;padding:1px;border:1px solid #000}.toast-data-icon-success[_ngcontent-%COMP%] > .mat-icon[_ngcontent-%COMP%]{background-color:#20b2aa}.toast-data-icon-warning[_ngcontent-%COMP%] > .mat-icon[_ngcontent-%COMP%]{background-color:#dd8900}.toast-data-icon-info[_ngcontent-%COMP%] > .mat-icon[_ngcontent-%COMP%]{background-color:#749aa8}.toast-close-icon[_ngcontent-%COMP%]{cursor:pointer}.toast-close-icon-success[_ngcontent-%COMP%]{background-color:#00b173;height:100%;border-left:3px solid #2e8b57}.toast-close-icon-warning[_ngcontent-%COMP%]{background-color:#dd8900;height:100%;border-left:3px solid #f09c00}.toast-close-icon-info[_ngcontent-%COMP%]{background-color:#749aa8;height:100%;border-left:3px solid #557a88}.toast-type-success[_ngcontent-%COMP%]{background-color:green;color:#fff}.toast-text[_ngcontent-%COMP%]{padding:0 .5em}.toast-type-warning[_ngcontent-%COMP%]{background-color:orange;color:#fff}.toast-type-info[_ngcontent-%COMP%]{background-color:#add8e6;color:#fff}"],changeDetection:0}),t}();function N(t){return null!=t}e.Component,e.ChangeDetectionStrategy.OnPush,e.ViewChild,e.ViewChild,e.ViewChild,e.ViewChild;var A=function(){function t(t,e){this.overlay=t,this.parentInjector=e,this.openTopToasts=[],this.openBottomToasts=[]}return t.prototype.showToast=function(t){null==t&&(t=d);var e=this.getOverlayPosition(t),o=this.overlay.create({positionStrategy:e}),a=new p(o);"top"===t.verticalPosition&&this.openTopToasts.push(a),"bottom"===t.verticalPosition&&this.openBottomToasts.push(a);var r=this.getInjector(t,a,this.parentInjector),i=new n.ComponentPortal(V,null,r);return o.attach(i),a},t.prototype.closeToast=function(t){this.openTopToasts=this.openTopToasts.filter(function(e){if(e!==t)return e}),this.openBottomToasts=this.openBottomToasts.filter(function(e){if(e!==t)return e}),t.close()},t.prototype.closeAllToasts=function(){(function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t})(this.openTopToasts,this.openBottomToasts).forEach(function(t){t.close()}),this.openBottomToasts=[],this.openTopToasts=[]},t.prototype.getInjector=function(t,e,o){var a=new WeakMap;return a.set(g,t),a.set(p,e),new n.PortalInjector(o,a)},t.prototype.getOverlayPosition=function(t){var e=this.overlay.position().global();if("center"===t.verticalPosition)e.centerVertically();else{if("top"===t.verticalPosition){var o=0,n=void 0;this.openTopToasts.length>0&&(n=this.openTopToasts[this.openTopToasts.length-1]),N(n)&&(o=n.getPosition().height);var a=void 0;a=t.position.top?this.openTopToasts.length*o+t.position.top:this.openTopToasts.length*o,e.top(a+"px")}if("bottom"===t.verticalPosition){var r=0,i=void 0;this.openBottomToasts.length>0&&(i=this.openBottomToasts[this.openBottomToasts.length-1]),N(i)&&(r=i.getPosition().height);a=void 0;a=t.position.bottom?this.openBottomToasts.length*r+t.position.bottom:this.openBottomToasts.length*r,e.bottom(a+"px")}}return"center"===t.horizontalPosition?e.centerHorizontally():("right"===t.horizontalPosition&&(t.position.right?e.right(t.position.right+"px"):e.right("25px")),"left"===t.horizontalPosition&&(t.position.left?e.left(t.position.left+"px"):e.left("25px"))),e},t.ngInjectableDef=e.ɵɵdefineInjectable({token:t,factory:function(n){return new(n||t)(e.ɵɵinject(o.Overlay),e.ɵɵinject(e.Injector))},providedIn:null}),t}();e.Injectable;var Q=function(){function t(){}return t.ngModuleDef=e.ɵɵdefineNgModule({type:t}),t.ngInjectorDef=e.ɵɵdefineInjector({factory:function(e){return new(e||t)},providers:[A],imports:[[i.CommonModule,o.OverlayModule,l.MatIconModule,c.FlexLayoutModule,l.MatProgressBarModule]]}),t}();i.CommonModule,o.OverlayModule,l.MatIconModule,c.FlexLayoutModule,l.MatProgressBarModule,e.NgModule,i.CommonModule,o.OverlayModule,l.MatIconModule,c.FlexLayoutModule,l.MatProgressBarModule;var U=[1,"umbra-messages-inline"],z=[3,"ngIf","ngIfElse"],$=["groupMessageContainer",""],G=["ngFor","",3,"ngForOf"],H=[1,"umbra-inline-message"];function W(t,o){if(1&t&&(e.ɵɵelementStart(0,"div",H),e.ɵɵtext(1),e.ɵɵelementEnd()),2&t){var n=o.$implicit;e.ɵɵselect(1),e.ɵɵtextInterpolate1(" ",n.summary," ")}}function J(t,o){if(1&t&&e.ɵɵtemplate(0,W,2,1,"ng-template",G),2&t){var n=e.ɵɵnextContext();e.ɵɵproperty("ngForOf",n.umbraMessages)}}var K=[1,"umbra-inline-group-message-container"];function X(t,o){if(1&t&&(e.ɵɵelementStart(0,"div",H),e.ɵɵtext(1),e.ɵɵelementEnd()),2&t){var n=o.$implicit;e.ɵɵselect(1),e.ɵɵtextInterpolate1(" ",n.summary," ")}}function Y(t,o){if(1&t&&(e.ɵɵelementStart(0,"div",K),e.ɵɵtemplate(1,X,2,1,"ng-template",G),e.ɵɵelementEnd()),2&t){var n=e.ɵɵnextContext();e.ɵɵselect(1),e.ɵɵproperty("ngForOf",n.umbraMessages)}}var Z=function(){function t(){this.umbraMessages=[],this.groupMessages=!1,this.shouldTimeout=!1,this.setTimeout=2500}return t.prototype.ngOnInit=function(){this.shouldTimeout},t.ngFactoryDef=function(e){return new(e||t)},t.ngComponentDef=e.ɵɵdefineComponent({type:t,selectors:[["umbra-messaging-inline"]],inputs:{umbraMessages:"umbraMessages",groupMessages:"groupMessages",shouldTimeout:"shouldTimeout",setTimeout:"setTimeout"},consts:4,vars:2,template:function(t,o){if(1&t&&(e.ɵɵelementStart(0,"div",U),e.ɵɵtemplate(1,J,1,1,"ng-template",z),e.ɵɵtemplate(2,Y,2,1,"ng-template",null,$,e.ɵɵtemplateRefExtractor),e.ɵɵelementEnd()),2&t){var n=e.ɵɵreference(3);e.ɵɵselect(1),e.ɵɵproperty("ngIf",o.shouldTimeout)("ngIfElse",n)}},directives:[i.NgIf,i.NgForOf],styles:[""],changeDetection:0}),t}();e.Component,e.ChangeDetectionStrategy.OnPush,e.Input,e.Input,e.Input,e.Input;var tt=function(){function t(){}return t.ngModuleDef=e.ɵɵdefineNgModule({type:t}),t.ngInjectorDef=e.ɵɵdefineInjector({factory:function(e){return new(e||t)},imports:[[l.MatIconModule,c.FlexLayoutModule,i.CommonModule]]}),t}();l.MatIconModule,c.FlexLayoutModule,i.CommonModule,e.NgModule,l.MatIconModule,c.FlexLayoutModule,i.CommonModule,t.DEFAULT_MARGIN=25,t.ToastConfig=g,t.ToastData=f,t.UmbraInlineComponent=Z,t.UmbraInlineModule=tt,t.UmbraToastComponent=V,t.UmbraToastModule=Q,t.UmbraToastService=A,t.defaultToastConfig=d,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=umbra-messaging.umd.min.js.map